#!/usr/bin/env bb

(require '[babashka.pods :as pods])

(pods/load-pod 'org.babashka/go-sqlite3 "0.1.0")
(require '[pod.babashka.go-sqlite3 :as sqlite])

(require '[babashka.fs :as fs])

(def usr-path
  (-> "~/Library/Application Support/Godot/app_userdata/"
      fs/expand-home
      str))

(def db-path "data/trot-dev.db")
; (fs/exists? db-path)


(defn select-projects [where]
  (sqlite/query db-path
    [(str "select * from projects where " where)]))


(defn select-projects-all []
  (select-projects "1=1"))


(defn delete-projects [where]
  (sqlite/query db-path
    [(str "delete from projects where " where)]))

(prn (count (select-projects-all)))

; (delete-projects "created_at > '2025-09-13T13'")




